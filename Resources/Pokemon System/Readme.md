
-- [ Pokemon system ] --
-- Open iteminfo.txt add these --
// Pokemon //
8050	Normal Pokeball	pokeball1	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	1	1	1	99	0	5000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0	0	Normal Pokeball used to catch monster from level 10 to level 30.	0	
8051	Great Pokeball	pokeball2	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	0	0	1	99	0	50000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0	0	Great Pokeball used to catch monster from level 30 to level 60.	0	
8052	Ultra Pokeball	pokeball3	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	0	0	1	99	0	2500000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0	0	Ultra Pokeball used to catch monster from level 60 to level 90.	0	
8053	Master Pokeball	pokeball4	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	0	0	1	99	0	5000000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0	0	Master Pokeball used to catch monster from level 90 to level 100.	0	

8054	Used Normal Pokeball	pokeball1	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	1	1	1	1	0	5000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	ItemUse_Pokeball1	0	0	0	0,0	0	0	Normal Pokeball. Something is inside.	0	
8055	Used Great Pokeball	pokeball2	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	0	0	1	1	0	50000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	ItemUse_Pokeball2	0	0	0	0,0	0	0	Great Pokeball. Something is inside.	0	
8056	Used Ultra Pokeball	pokeball3	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	0	0	1	1	0	2500000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	ItemUse_Pokeball3	0	0	0	0,0	0	0	Ultra Pokeball. Something is inside.	0	
8057	Used Master Pokeball	pokeball4	10130005	0	0	0	0	0	0	31	0	0	0	0	0	1	0	0	1	1	0	5000000	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	100000,100000	0	0	0	0	0	0	0	0	0	ItemUse_Pokeball4	0	0	0	0,0	0	0	Master Pokeball. Something is inside.	0	
																																																																																															
8058	Pokeball Book	10130005	0	0	0	0	0	0	34	0	0	0	0	0	1	1	1	1	1	0	20700	-1,-2,-2,-2	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	-1,-2,-2,-2,-2,-2,-2,-2,-2,-2	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0,0	0,0	0	0	0	0	0	0	0	0	0	Pokeball_skillbook	0	0	0	0,0	0	0	Pokeball skill. Used to capture different type of monsters	0	0
8059	Pokemon land Ticket	n0307	10130005	0	0	0	0	0	00	36	0	0	0	0	0	1	1	1	1	99	0	5000000	-1	0	-1	0	0	-1	-1	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0,0	0	0	0,0	0	0	0	0	0	0	0	0	0	ItemUse_bosslandtick	0	0	0	0	0	0	Teleport ticket to Pokemon land		0

-- Open script>calculate>skilleffect.lua add this

function SkillSp_Pokeball ( sklv )	
	local sp_reduce = 200
	return sp_reduce 
end 

function SkillCooldown_Pokeball( sklv )
	local Cooldown = 5000
	return Cooldown
end

function Skill_Pokeball_Begin ( role , sklv ) 
	local sp = Sp(role) 
	local sp_reduce = SkillSp_HLKJ ( sklv ) 
	if sp - sp_reduce < 0 then 
		SkillUnable(role)   
		return 
	end 
	Sp_Red (role , sp_reduce ) 
end 

Pokemon = {}

function Skill_Pokeball_End ( ATKER , DEFER , sklv ) 
	for i = 1,4,1 do
	local PokeBall = {}
	PokeBall[1] = 8050
	PokeBall[2] = 8051
	PokeBall[3] = 8052
	PokeBall[4] = 8053
	if(GetChaItem2(ATKER,2,PokeBall[i]) == 0)then
	SystemNotice(ATKER,"You dont have any pokeball in your bag")
	SkillUnable(ATKER)
	return 0
		end
	end
	local Percentage = Mxhp(DEFER) * 0.2
	if(Hp(DEFER) > Percentage)then
	SystemNotice(ATKER,"Monster must have 20 Percent hp or lower")
	SkillUnable(ATKER)
	return 0
	end
	local FailChance = Percentage_Random(0.5)
	if FailChance == 0 then
	BickerNotice(ATKER,"Failed to capture "..GetChaDefaultName(DEFER)..)
	local BerserkPercentage = Mxhp(DEFER) * 0.25
	local Heal = BerserkPercentage + (Mxhp(DEFER) * 0.15)
	SetCharaAttr(Heal,DEFER,ATTR_HP)
	return 0
	end
	local ID = GetChaID(DEFER)
	local cha = TurnToCha(DEFER)
	if Lv(cha) > 100 or BERSERK_MONSTER[ID] ~= nil then
	BickerNotice(ATKER,"You cannot hunt this monster")
	SkillUnable(ATKER)
	return 0
	end
	if Lv(cha) >= 10 and Lv(cha) <= 30 then
	local a = DelBagItem(ATKER,8050,1)	
		if a == 0 then
	SystemNotice(ATKER,"You dont have "..GetItemName(8050).." to catch "..GetChaDefaultName(DEFER))
	SkillUnable(ATKER)
	return 0
	end
	r1, r2 = MakeItem ( ATKER , 8054  , 1 , 18 )
	local SealPokeBall = GetChaItem ( ATKER , 2 , r2 )
	SetItemAttr ( SealPokeBall , ITEMATTR_MAXURE , ID )
	SetItemAttr ( SealPokeBall , ITEMATTR_URE , ID )
	Hp_Endure_Dmg(DEFER,Mxhp(DEFER))
	BickerNotice(ATKER,""..GetChaDefaultName(DEFER).." has been captured inside "..GetItemName(8050))
	elseif Lv(cha) > 30 and Lv(cha) <= 60 then
	local a = DelBagItem(ATKER,8051,1)	
		if a == 0 then
	SystemNotice(ATKER,"You dont have "..GetItemName(8051).." to catch "..GetChaDefaultName(DEFER))
	SkillUnable(ATKER)
	return 0
	end

	r1, r2 = MakeItem ( ATKER , 8055  , 1 , 18 )
	local SealPokeBall = GetChaItem ( ATKER , 2 , r2 )
	SetItemAttr ( SealPokeBall , ITEMATTR_MAXURE , ID )
	SetItemAttr ( SealPokeBall , ITEMATTR_URE , ID )
	Hp_Endure_Dmg(DEFER,Mxhp(DEFER))
	BickerNotice(ATKER,""..GetChaDefaultName(DEFER).." has been captured inside "..GetItemName(8051))
	elseif Lv(cha) > 60 and Lv(cha) <= 90 then
	local a = DelBagItem(ATKER,8052,1)	
	r1, r2 = MakeItem ( ATKER , 8056  , 1 , 18 )
		if a == 0 then
	SystemNotice(ATKER,"You dont have "..GetItemName(8052).." to catch "..GetChaDefaultName(DEFER))
	SkillUnable(ATKER)
	return 0
	end
	local SealPokeBall = GetChaItem ( ATKER , 2 , r2 )
	SetItemAttr ( SealPokeBall , ITEMATTR_MAXURE , ID )
	SetItemAttr ( SealPokeBall , ITEMATTR_URE , ID )
	Hp_Endure_Dmg(DEFER,Mxhp(DEFER))
	BickerNotice(ATKER,""..GetChaDefaultName(DEFER).." has been captured inside "..GetItemName(8052))
	elseif Lv(cha) > 90 and Lv(cha) <= 100 then
	local a = DelBagItem(ATKER,8053,1)	
	r1, r2 = MakeItem ( ATKER , 8057  , 1 , 18 )
		if a == 0 then
	SystemNotice(ATKER,"You dont have "..GetItemName(8053).." to catch "..GetChaDefaultName(DEFER))
	SkillUnable(ATKER)
	return 0
	end
	local SealPokeBall = GetChaItem ( ATKER , 2 , r2 )
	SetItemAttr ( SealPokeBall , ITEMATTR_MAXURE , ID )
	SetItemAttr ( SealPokeBall , ITEMATTR_URE , ID )
	Hp_Endure_Dmg(DEFER,Mxhp(DEFER))
	BickerNotice(ATKER,""..GetChaDefaultName(DEFER).." has been captured inside "..GetItemName(8053))
	end
end
-- remeber to edit the balls ids if u change them
-- Open itemeffect.lua and add this

function ItemUse_Pokeball1 ( role , Item )
	local name = GetChaDefaultName(role)
	if(player_petNum[player_pet[name]] == 1 and Hp(player_pet[name]) > 0)then
	BickerNotice(role,"You cannot have more than one pokemon.")
	UseItemFailed ( role )
	return
	end
	local Pokeball_ID = GetItemAttr ( Item , ITEMATTR_URE )
	local x, y = GetChaPos(role)
	local Refresh = 9000				
	local life = 3600000					
	local new = CreateChaX( Pokeball_ID , x , y , 145 , Refresh, role )
	SetChaLifeTime( new, life )
	SetChaSideID(new, GetChaSideID(role))
	SetChaHost(new,role)
	SetChaAIType(new, AI_PET)
end
function ItemUse_Pokeball2 ( role , Item )
	local name = GetChaDefaultName(role)
	if(player_petNum[player_pet[name]] == 1 and Hp(player_pet[name]) > 0)then
	BickerNotice(role,"You cannot have more than one pokemon.")
	UseItemFailed ( role )
	return
	end
	local Pokeball_ID = GetItemAttr ( Item , ITEMATTR_URE )
	local x, y = GetChaPos(role)
	local Refresh = 9000				
	local life = 3600000					
	local new = CreateChaX( Pokeball_ID , x , y , 145 , Refresh, role )
	SetChaLifeTime( new, life )
	SetChaSideID(new, GetChaSideID(role))
	SetChaHost(new,role)
	SetChaAIType(new, AI_PET)
end
function ItemUse_Pokeball3 ( role , Item )
	local name = GetChaDefaultName(role)
	if(player_petNum[player_pet[name]] == 1 and Hp(player_pet[name]) > 0)then
	BickerNotice(role,"You cannot have more than one pokemon.")
	UseItemFailed ( role )
	return
	end
	local Pokeball_ID = GetItemAttr ( Item , ITEMATTR_URE )
	local x, y = GetChaPos(role)
	local Refresh = 9000				
	local life = 3600000					
	local new = CreateChaX( Pokeball_ID , x , y , 145 , Refresh, role )
	SetChaLifeTime( new, life )
	SetChaSideID(new, GetChaSideID(role))
	SetChaHost(new,role)
	SetChaAIType(new, AI_PET)
end
function ItemUse_Pokeball4 ( role , Item )
	local name = GetChaDefaultName(role)
	if(player_petNum[player_pet[name]] == 1 and Hp(player_pet[name]) > 0)then
	BickerNotice(role,"You cannot have more than one pokemon.")
	UseItemFailed ( role )
	return
	end
	local Pokeball_ID = GetItemAttr ( Item , ITEMATTR_URE )
	local x, y = GetChaPos(role)
	local Refresh = 9000				
	local life = 3600000					
	local new = CreateChaX( Pokeball_ID , x , y , 145 , Refresh, role )
	SetChaLifeTime( new, life )
	SetChaSideID(new, GetChaSideID(role))
	SetChaHost(new,role)
	SetChaAIType(new, AI_PET)
end


function ItemUse_bosslandtick(role, Item )
	local i = CheckBagItem(role,8059)
	local k = ChaIsBoat(role)
	local hp = Hp(role)
	local mxhp = Mxhp(role)
	local sp = Sp(role)
	local mxsp = Mxsp(role)
	if sp < mxsp or hp < mxhp then 
		SystemNotice (role, "Teleportation is a tedious process. Please maintain full HP and SP")
		UseItemFailed ( role )
		return
	end 
	if k == 0 then
		if i > 0 then
			local j = DelBagItem(role,8059,1)
			if j == 1 then
				MoveCity(role,"Pokemon land")
				return
			end
		end
	else
		UseItemFailed ( role )
	end
		
end

-- Open skillinfo.txt add this
0496	Pokeball	1	-1,10	1,-1	1,-1	1,-1	-1	0	1	0	-1	-1	1	1	1	300	4	1	0	0	0	0	0	SkillSp_Pokeball	0	0	0	0	Skill_Pokeball_End	0	0	0	0	0	0	0	0	0	0	0	0	0	0	SkillCooldown_Pokeball	1	1	11	-1	40	-1	379	0	0	0,0	0,0	0	9	-1	0	0	-1	2	101	0	0	0	pokeball.tga	0	0	Pokeball skill	Used to capture monsters with different levels, Depends on pokeball types.	0	0																																		
-- You're done!

P.S : Edit the monsters that inside bosslandmonster_conf.lua
